
> rest-express@1.0.0 start
> NODE_ENV=production node dist/index.js

Anthropic SDK not available, using fallback compatibility scoring
Anthropic SDK not available, using fallback translation methods
4:23:38 AM [express] Checking for processes on port 5000...
4:23:38 AM [express] Port cleanup completed
[ROUTE DEBUG] Starting route registration...
Using PostgreSQL session store with table: session
[ROUTE DEBUG] Route registration completed. All routes should be available now.
4:23:38 AM [express] NODE_ENV: production, isProduction: true
4:23:38 AM [express] Using static file serving for production
4:23:38 AM [express] Attempting to start server (attempt 1/3)
4:23:38 AM [express] Server started successfully on port 5000
Deserializing user: 232
Deserialized user found: end
Deserializing user: 232
Deserialized user found: end
Deserializing user: 232
Deserialized user found: end
Deserializing user: 232
Deserializing user: 232
Deserialized user found: end
Deserialized user found: end
User verified exists: end
4:24:10 AM [express] POST /api/verify-user 200 in 295ms :: {"valid":true}
Deserializing user: 232
Deserialized user found: end
Event creation request received from user: end
Form data: [Object: null prototype] {
  title: 'tiers 8',
  description: 'kbf dbjk brjkb r',
  category: 'Other',
  location: 'Cinnaminson, 1506 Cinnaminson Avenue',
  date: '2025-09-30T17:00:00.000Z',
  time: '12:00:00',
  price: '10',
  ticketTiers: '[{"name":"VIP","description":"koembkmb","price":10,"quantity":10},{"name":"Early bird","description":"bk bekbj br","price":5,"quantity":15}]',
  eventPrivacy: 'public',
  itinerary: '[]',
  tags: '["Paid Event"]'
}
File: undefined
Parsed itinerary data: []
Uploaded event image to Cloudinary: https://res.cloudinary.com/dwmolc54p/image/upload/v1758947140/images/uploads/1758947139820_IMG_5298.jpeg.jpg
Geocoding location: Cinnaminson, 1506 Cinnaminson Avenue
Geocoding successful: lat=39.992254, lng=-75.014261
Creating new event: tiers 8
Event successfully saved to database with ID: 182
Creating Stripe Product for tier: VIP
Created Stripe Product prod_T85tnirKswKtME and Price price_1SBphZRxoKeYwVbtuyg0KOZb for tier VIP
Creating Stripe Product for tier: Early bird
Created Stripe Product prod_T85tFzq7bFdOVc and Price price_1SBphaRxoKeYwVbtPt6st97a for tier Early bird
DEBUG: Tiers prepared for insertion: [
  {
    event_id: 182,
    name: 'VIP',
    description: 'koembkmb',
    price: 10,
    quantity: 10,
    stripe_product_id: 'prod_T85tnirKswKtME',
    stripe_price_id: 'price_1SBphZRxoKeYwVbtuyg0KOZb',
    is_active: true,
    created_at: 2025-09-27T04:25:42.235Z
  },
  {
    event_id: 182,
    name: 'Early bird',
    description: 'bk bekbj br',
    price: 5,
    quantity: 15,
    stripe_product_id: 'prod_T85tFzq7bFdOVc',
    stripe_price_id: 'price_1SBphaRxoKeYwVbtPt6st97a',
    is_active: true,
    created_at: 2025-09-27T04:25:42.235Z
  }
]
Inserting 2 ticket tiers into database
Error creating event: TypeError: Cannot read properties of undefined (reading 'event_id')
    at file:///home/runner/workspace/node_modules/drizzle-orm/pg-core/query-builders/insert.js:37:81
    at Array.map (<anonymous>)
    at PgInsertBuilder.values (file:///home/runner/workspace/node_modules/drizzle-orm/pg-core/query-builders/insert.js:32:33)
    at file:///home/runner/workspace/dist/index.js:4945:58
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
4:25:42 AM [express] POST /api/events 500 in 5275ms :: {"error":"Failed to create event","details":"â€¦